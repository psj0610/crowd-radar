{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///Users/parkseojin/Desktop/App%20Project%20by%20psj/components/CrowdRadar.tsx"],"sourcesContent":["\"use client\";\n\nimport React, { useEffect, useRef, useState } from 'react';\nimport mapboxgl from 'mapbox-gl';\n\nconst TOKEN = process.env.NEXT_PUBLIC_MAPBOX_TOKEN || \"\";\nmapboxgl.accessToken = TOKEN;\n\nconst GANGNAM_STATION = { lat: 37.498095, lng: 127.027610 };\n\n// üõë MANUAL DATA (Our 10 Cafes)\nconst REAL_CAFES = [\n  { name: \"Starbucks Gangnam R\", lat: 37.4978, lng: 127.0286, busyness: 9 },\n  { name: \"Blue Bottle Coffee\", lat: 37.4971, lng: 127.0282, busyness: 5 },\n  { name: \"Starbucks Yeoksam\", lat: 37.4992, lng: 127.0295, busyness: 7 },\n  { name: \"Twosome Place\", lat: 37.4985, lng: 127.0260, busyness: 3 },\n  { name: \"Ediya Coffee\", lat: 37.4965, lng: 127.0255, busyness: 2 },\n  { name: \"Coffee Bean & Tea Leaf\", lat: 37.4988, lng: 127.0278, busyness: 6 },\n  { name: \"Mega Coffee\", lat: 37.4975, lng: 127.0290, busyness: 8 },\n  { name: \"Paul Bassett\", lat: 37.4995, lng: 127.0265, busyness: 4 },\n  { name: \"Dunkin' Gangnam\", lat: 37.4968, lng: 127.0270, busyness: 5 },\n  { name: \"Hollys Coffee\", lat: 37.4982, lng: 127.0250, busyness: 3 },\n];\n\nexport default function CrowdRadar() {\n  const mapContainer = useRef<HTMLDivElement>(null);\n  const map = useRef<mapboxgl.Map | null>(null);\n  const [status, setStatus] = useState(\"SYSTEM ONLINE\");\n\n  useEffect(() => {\n    if (map.current) return;\n    if (!mapContainer.current) return;\n\n    map.current = new mapboxgl.Map({\n      container: mapContainer.current,\n      style: 'mapbox://styles/mapbox/dark-v11',\n      center: [GANGNAM_STATION.lng, GANGNAM_STATION.lat],\n      zoom: 16,\n      pitch: 45,\n    });\n\n    map.current.on('load', () => loadManualData(map.current!));\n\n    // CLICK INTERACTION\n    map.current.on('click', 'cafe-dots', (e) => {\n      if (!e.features?.[0]) return;\n      const feature = e.features[0];\n      if (feature.geometry.type !== 'Point') return;\n      \n      const coordinates = feature.geometry.coordinates.slice() as [number, number];\n      const props = feature.properties;\n      if (!props) return;\n\n      // Create the popup (Styles are in globals.css)\n      new mapboxgl.Popup({ closeButton: true })\n        .setLngLat(coordinates)\n        .setHTML(`\n          <div style=\"text-align: center;\">\n            <h3 style=\"margin: 0; font-size: 16px; color: #33ff33;\">${props.name}</h3>\n            <div style=\"margin-top: 5px; font-size: 12px; color: #ccc;\">\n              CROWD LEVEL: <span style=\"color: white; font-weight: bold;\">${props.busyness}/10</span>\n            </div>\n            <div style=\"margin-top: 8px; width: 100%; height: 4px; background: #333;\">\n              <div style=\"width: ${props.busyness * 10}%; height: 100%; background: ${props.color}; box-shadow: 0 0 5px ${props.color};\"></div>\n            </div>\n          </div>\n        `)\n        .addTo(map.current!);\n    });\n\n    map.current.on('mouseenter', 'cafe-dots', () => map.current!.getCanvas().style.cursor = 'pointer');\n    map.current.on('mouseleave', 'cafe-dots', () => map.current!.getCanvas().style.cursor = '');\n  }, []);\n\n// üöÅ TELEPORT FUNCTION (SMARTER VERSION)\nconst flyToMe = () => {\n  if (!navigator.geolocation) {\n    alert(\"Geolocation is not supported by your browser\");\n    return;\n  }\n  \n  setStatus(\"LOCATING USER...\");\n\n  // Options: Be accurate, but give up after 5 seconds\n  const options = {\n    enableHighAccuracy: true,\n    timeout: 5000,\n    maximumAge: 0\n  };\n\n  navigator.geolocation.getCurrentPosition(\n    (position) => {\n      const { latitude, longitude } = position.coords;\n      map.current?.flyTo({\n        center: [longitude, latitude],\n        zoom: 14,\n        essential: true\n      });\n      \n      // Blue Marker for YOU\n      new mapboxgl.Marker({ color: '#3b82f6', scale: 1.2 })\n        .setLngLat([longitude, latitude])\n        .addTo(map.current!);\n\n      setStatus(\"USER LOCATED\");\n    },\n    (error) => {\n      console.error(error);\n      // If it fails, fallback to Seoul City Hall just to show movement\n      setStatus(\"GPS ERROR. TELEPORTING TO CITY HALL...\");\n      map.current?.flyTo({ center: [126.9780, 37.5665], zoom: 14 }); \n    },\n    options\n  );\n};\n\n  return (\n    <div style={{ width: '100vw', height: '100vh', backgroundColor: '#000', position: 'relative' }}>\n      <link href=\"https://api.mapbox.com/mapbox-gl-js/v3.1.2/mapbox-gl.css\" rel=\"stylesheet\" />\n      <div ref={mapContainer} style={{ width: '100%', height: '100%', position: 'absolute', top: 0, left: 0 }} />\n      \n      {/* STATUS HUD */}\n      <div style={{ \n        position: 'absolute', top: 20, left: 20, \n        padding: '10px 15px', background: 'rgba(0,0,0,0.8)', \n        color: '#33ff33', fontFamily: 'monospace', \n        border: '1px solid #33ff33', borderRadius: '4px',\n        boxShadow: '0 0 10px rgba(51, 255, 51, 0.2)',\n        zIndex: 10\n      }}>\n        ‚ö° {status}\n      </div>\n\n      {/* TELEPORT BUTTON */}\n      <button \n        onClick={flyToMe}\n        style={{\n          position: 'absolute', bottom: 30, right: 30,\n          background: '#33ff33', color: 'black',\n          border: 'none', padding: '15px 25px',\n          fontWeight: 'bold', fontFamily: 'monospace', fontSize: '16px',\n          cursor: 'pointer', borderRadius: '50px',\n          boxShadow: '0 0 20px rgba(51, 255, 51, 0.6)',\n          zIndex: 10\n        }}\n      >\n        üìç LOCATE ME\n      </button>\n    </div>\n  );\n\n  function loadManualData(map: mapboxgl.Map) {\n    const features = REAL_CAFES.map((cafe) => ({\n      type: 'Feature',\n      geometry: { type: 'Point', coordinates: [cafe.lng, cafe.lat] },\n      properties: {\n        name: cafe.name, busyness: cafe.busyness,\n        color: cafe.busyness > 7 ? '#ef4444' : cafe.busyness > 4 ? '#eab308' : '#22c55e'\n      }\n    }));\n\n    map.addSource('cafes', { type: 'geojson', data: { type: 'FeatureCollection', features: features as any } });\n\n    map.addLayer({\n      id: 'cafe-dots',\n      type: 'circle',\n      source: 'cafes',\n      paint: {\n        'circle-radius': 8,\n        'circle-color': ['get', 'color'],\n        'circle-stroke-width': 2,\n        'circle-stroke-color': '#fff',\n        'circle-blur': 0.2\n      }\n    });\n    setStatus(`ONLINE: ${features.length} NODES ACTIVE`);\n  }\n}"],"names":[],"mappings":"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"}}]
}